<html>
<head>
<link rel="shortcut icon" href="#" />
<link rel="stylesheet" href="/style.css">
<script src="https://rawgit.com/moment/moment/2.2.1/min/moment.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript">
var restUrl = location.protocol+'//'+location.hostname+(location.port ? ':'+location.port: '');

function onSendComplete()
{
    console.log("onSendComplete()");
}

function onSendError()
{
    console.log("onSendError()");
}

function onSendClick()
{
    var privatekey = $("#privatekey").val();
    var toaddress = $("#toaddress").val();
    var amount = $("#amount").val();

    var requestStr = JSON.stringify({
        privatekey : $("#privatekey").val(),
        toaddress : $("#toaddress").val(),
        amount : $("#amount").val(),
    });

    $.ajax({
        url: restUrl + "/createTx",
        type: 'POST',
        data: requestStr,
        success: onSendComplete(),
        error: onSendError()
    });
    console.log(`${requestStr}`);
}
</script>
<style>
table
{
    width: 100%;
    margin-left: auto;
    margin-right: auto;
}
textarea
{
    width: 100%; 
    max-width: 100%;
    height: 50px;;
}
input[type=text] 
{
  width: 100%;
  padding: 5px 5px;
  margin: 8px 0;
  box-sizing: border-box;
}
#amount
{
    width: 50%;
    padding: 5px 5px;
    margin: 8px 0;
    box-sizing: border-box;
}
.address-table tr th
{
    border: 1px solid black;
    background-color:lightblue;
    text-align: left;
    font-size: larger;
    font-weight: bold;
    padding: 5px;
}
.address-table tr td:nth-child(1)
{
    font-weight: bold;
    width: 33%;
}
.address-table td { padding: 4px; }
.private-key
{
    font-weight: bold;
    color: red;
}
.warning
{
    padding: 5px;
    background-color: rgb(255, 0, 0);
    color: white;
}
</style>
</head>
<body>
<!-- HEADER -->
<h2>%app-title% (%app-domain%)</h2>
<!-- /HEADER -->

<div class="warning"><center><b><big>WARNING!</big></b></center>This page does not ask for a confirmation! Once you click "Send" the funds are sent! Be sure all information is correct!</div>
<br/>
<table class="address-table">
    <tr>
        <th colspan="100%">Create Transaction</th>
    </tr>

    <tr><td><div class="private-key">Private Key</div><small>Using this page exposes your private key over the Internet. You have been warned! - Henry</small></small></td><td><textarea id="privatekey"></textarea></td></tr>
    <tr><td>Reciever Address</td><td><input type="text" id="toaddress"/></td></tr>
    <tr><td>Amount</td><td><input type="text" id="amount"/></td></tr>
    <tr><td colspan="100%"><center><button onclick="javascript:onSendClick();">Send Coins</button></center></td></tr>
</table>

<br/>

<!-- FOOTER -->
<br/>
<small>%app-copyright% (<a href="%app-github%" target="_blank">%app-github%</a>)</small>
<!-- /FOOTER -->
</body>
</html>